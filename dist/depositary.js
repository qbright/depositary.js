!function(e,t){var r=document.getElementsByTagName("head")[0],n=function(){this.thens=[]};n.prototype={constructor:n,resolve:function(){var e,t=this.thens.shift();t&&(e=t.apply(null,arguments))instanceof n&&(e.thens=this.thens)},then:function(e){return this.thens.push(e),this}};var o=function(e,t,r,n,o){!n&&(n=0),!o&&(o=[]);for(var i=0,a=0;a<e.length;a++){var c=function(e,t,r,n){return function(o){i++,n[r]=o,e.length===i&&t&&t(n)}}(e,r,a,o);t&&t(e[a],c)}},i={getScript:function(e){var t=new n,r=new XMLHttpRequest;return r.open("GET",e),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||0===r.status&&r.responseText)&&t.resolve({s:r.responseText})},r.send(),t},extend:function(e,t){var r=JSON.parse(JSON.stringify(e));for(var n in t)r[n]=t[n];return r},formatUrl:function(e){if(!e.url)throw new Error("depositary.js Error : url is required");return e.hash===t&&(e.hash=""),e.id===t&&(e.id=e.url),e.fUrl=e.url.replace(/\[hash\]/gim,e.hash).replace(/\[id\]/gim,e.id),e},formatConfig:function(e){for(var t,r=[],n=0;t=e[n];n++){var o=i.extend(u,t);r.push(this.formatUrl(o))}return r},executeCode:function(e){switch(e.type){case"js":s.executeScript(e)}}},a=e.localStorage,c={getSource:function(e){if(e.ignoreCache)return null;var t="depositary-"+e.id,r=a.getItem(t);if(!r)return null;try{r=JSON.parse(r)}catch(e){return null}var n=Date.now();return r.settime+r.expired<n||e.hash!==r.hash?(this.clean(t),null):r},checkStorageAvility:function(){return!!e.localStorage},setSource:function(e){var t="depositary-"+e.id;e.settime=Date.now(),localStorage.setItem(t,JSON.stringify(e))},clean:function(e){e?localStorage.removeItem(e):localStorage.clear()}},s={executeScript:function(e){var t=document.createElement("script");t.defer=!0,t.text=e.s,r.appendChild(t)},loadScript:function(e){o(e,function(e,t){var r=c.getSource(e);r?t(r):i.getScript(e.fUrl).then(function(r){e.s=r.s,c.setSource(e),t(e)})},function(e){console.log(e);for(var t=0;t<e.length;t++)i.executeCode(e[t])})}},u={expired:31536e6,type:"js",ignoreCache:!1};e.depositary={fetch:function(e){var t=i.formatConfig(e);c.checkStorageAvility()&&s.loadScript(t)}}}(window,void 0);